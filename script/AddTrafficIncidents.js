function AddTrafficIncidents(n){const t=document.getElementById("traffic-incidents-panel"),e=document.getElementById("traffic-incidents-button"),i=document.getElementById("close-incidents-panel"),d=document.querySelector(".incidents-container");function c(){fetch(n).then((n=>{if(!n.ok)throw new Error("网络响应不正常");return n.json()})).then((n=>{!function(n){if(!n||0===n.length)return void(d.innerHTML='<div class="no-incidents">目前没有交通事件</div>');d.innerHTML="";const t=Math.min(n.length,10);for(let e=0;e<t;e++){const t=n[e],i=document.createElement("div");i.className="incident-item "+("正常"===t.road_status?"normal":"blocked");const c=s(new Date(t.pubDate));i.innerHTML=`\n                <div class="incident-header">\n                    <span class="incident-type ${"正常"===t.road_status?"normal":"blocked"}">\n                        ${t.road_status}\n                    </span>\n                    <span class="incident-time">${c}</span>\n                </div>\n                <div class="incident-title">${t.title}</div>\n                <div class="incident-location">\n                    <i class="fa-solid fa-location-dot"></i>\n                    ${t.location}\n                </div>\n            `,d.appendChild(i),t.location&&i.addEventListener("click",(()=>{}))}}(n)})).catch((n=>{d.innerHTML='<div class="error-message">获取交通事件失败，请稍后再试</div>'}))}function s(n){const t=new Date-n,e=Math.floor(t/6e4);if(e<60)return`${e} 分钟前`;if(e<1440){return`${Math.floor(e/60)} 小时前`}return`${n.getMonth()+1}月${n.getDate()}日 ${n.getHours().toString().padStart(2,"0")}:${n.getMinutes().toString().padStart(2,"0")}`}e.addEventListener("click",(()=>{"block"===t.style.display?t.style.display="none":(c(),t.style.display="block")})),i.addEventListener("click",(()=>{t.style.display="none"})),setInterval(c,3e5),c()}"undefined"!=typeof module&&module.exports&&(module.exports={AddTrafficIncidents});